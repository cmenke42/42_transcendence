<!-- SUPER USER -->
<div class="container">
    <h1 class="text-center">Welcome to Transcendence</h1>
    @if(loggedInUser?.is_superuser)
    {
        <div class="row">
            <div class="col-md-8 mx-auto">
               <table class="table table-striped">
                   <thead>
                       <tr>
                           <th>Email</th>
                           <th>super User</th>
                           <th>Actions</th>
                       </tr>
                   </thead>
                   <tbody>
                    @for(user of data; track user.id)
                    {
                       <tr>
                       
                           <td>{{user.email}}</td>
                            <td>{{user.is_superuser}}</td>
                            <td>{{user.id}}</td>
                            <td>
                            <button class="btn btn-danger" (click)="removeUser(user.id)">Delete</button>
                            <button class="btn btn-primary" (click)="updateUser(user.id)">Update</button>
                            </td>
                       </tr>
                    }
                    @empty 
                    {
                        <tr>
                            <td colspan="3" class="text-center">No data</td>
                        </tr>
                    }
                   </tbody>
                  </table>
            </div>
        </div>
        
    }@else {
    <!-- NORMAL USER -->
    <div class="container d-flex justify-content-center align-items-center" style="height: 75vh;">
      <div class="col-md-6 col-lg-4 p-4 border">
        <h2 class="text-center">Hello, {{ user_profile?.nickname }} </h2>
              <!-- INTRA USER -->
              @if(loggedInUser?.is_intra_user) {
                <img [src]="user_profile?.intra_avatar" alt="User Avatar" class="img-fluid mb-3">
              } @else { 
                <!-- NOT INTRA USER -->
                <form (ngSubmit)="saveProfileChanges()">
                    <div class="mb-3">
                      <label for="nickname" class="form-label">New nickname:</label>

                      <input type="text" id="nickname" name="nickname" [(ngModel)]="newNickname" class="form-control">
                    </div>
                    
                    <div class="mb-3">
                        <label for="avatar" class="form-label">Avatar:</label>
                        <input type="file" id="avatar" (change)="onFileSelected($event)" class="form-control">
                      </div>
                    
                    @if(user_profile?.avatar) {
                         <img [src]="user_profile?.avatar" alt="User Avatar" class="img-fluid mb-3"> 
                          
                      } @else {
                        <p>No avatar uploaded</p>
                      }                    
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                  </form>
                }
              </div>
            </div>
          
              
    } 
      
</div>
