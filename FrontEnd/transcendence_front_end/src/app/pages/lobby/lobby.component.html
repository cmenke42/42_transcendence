<div class="container custom-container">
  <ul ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs custom-nav">
    <li [ngbNavItem]="1" class="nav-item flex-fill">
      <a ngbNavLink class="custom-nav-link">
        <i class="fas fa-user-friends"></i>
        <span>1v1 Matches</span>
      </a>
      <ng-template ngbNavContent>
        <div class="card custom-card">
          <div class="card-body text-center">
            <p class="card-text">1v1 matches List</p>
           <hr>
            <ul class="list-group mt-3">
            @if (oneVsOneMatches.length > 0)
            {
              @for( v1 of oneVsOneMatches; track v1.id)
              {
                <li class="list-group-item list-group-item-primary custom-blue-item">
                  <div class="d-flex justify-content-between align-items-center">
                    <p class="mb-0">Vs  {{v1.opponent_username}}</p>
                    <!-- <button class="btn btn-outline-primary custom-button" (click)="GameStart(v1.id)">Start Game</button> -->
                  <a class="btn btn-outline-primary" [routerLink]="['/pong-match/', MatchType.PVP ,v1.id]">Start Game</a>
                  </div>
                </li>
              }
            }
            @else 
            {
              <div class="d-flex justify-content-between align-items-center">
                <p class="mb-0">No Matach is available</p>
              </div>
            }
            </ul>
          </div>
        </div>
      </ng-template>
    </li>
    <li [ngbNavItem]="2" class="nav-item flex-fill">
      <a ngbNavLink class="custom-nav-link">
        <i class="fas fa-trophy"></i>
        <span>Tournament Matches</span>
      </a>
      <ng-template ngbNavContent>
        <div class="card custom-card">
          <div class="card-body text-center">
            <p class="card-text">This box is for tournament matches.</p>
            <button class="btn btn-outline-primary" (click)="createTournament()">Create Tournament</button>
            <div class="table-responsive mt-3">
              @if (tournamentList.length > 0)
              {
                <table class="table table-striped table-hover">
                  <thead>
                    <tr>
                      <th>ID</th>
                      <th>created_by</th>
                      <th>Max Players</th>
                      <th>Winner</th>
                      <th>Status</th>
                      <th>Action</th>
                    </tr>
                  </thead>
                  <tbody>
              @for(tournament of tournamentList; track tournament.id)
              {
                <tr>
                  <td>{{ tournament.id }}</td>
                  <td>{{tournament.creator_nickname}}</td>
                  <td>{{ tournament.max_players }}</td>
                  <td>
              @if (tournament.winner_id)
              {
                {{ tournament.winner_nickname}}  üèÜ
              }
              @else
              {
                Not decided
              }
            </td>
            <td>{{ tournament.tournament_status }}</td>
            <td>
              @if (tournament.tournament_status.toLowerCase() === 'created')
              {
                @if(tournament.creator_nickname === user_data?.nickname)
                {
                  <!-- <p>{{tournament.user_nickname}} + {{user_data?.nickname}}</p> -->
                  <button class="btn btn-outline-primary btn-sm" (click)="startTournament(tournament.id)">start</button>
                }
                @if (tournament.is_participant)
                {
                  <button class="btn btn-outline-danger btn-sm" (click)="leaveTournament(tournament.id)">leave</button>
                }
                @else 
                {
                  <button class="btn btn-outline-primary btn-sm" (click)="joinTournament(tournament.id)">Join</button>
                }
              }
              @else if (tournament.tournament_status.toLowerCase() === 'on_going')  
              {
                <a class="btn btn-outline-primary btn-sm" [routerLink]="['/home/matchmaking', tournament.id, nickname]">View</a>
              }
              @else if (tournament.tournament_status.toLowerCase() === 'completed')
              {
                <a class="btn btn-outline-primary btn-sm" [routerLink]="['/home/matchmaking', tournament.id, nickname]">View</a>
              }
            </td>
          </tr>
        }
                  </tbody>
                </table>
              }
              @else 
              {
                <p class="text-center">No Tournaments available right now</p>
              }
            </div>
          </div>
        </div>
      </ng-template>
    </li>
  </ul>
  <div [ngbNavOutlet]="nav" class="mt-2"></div>
</div>

  